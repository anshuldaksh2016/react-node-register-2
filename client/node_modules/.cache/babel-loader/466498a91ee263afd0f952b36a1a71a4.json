{"ast":null,"code":"import _defineProperty from\"E:\\\\React stuff\\\\demo1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"E:\\\\React stuff\\\\demo1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\React stuff\\\\demo1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\React stuff\\\\demo1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\React stuff\\\\demo1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\React stuff\\\\demo1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\React stuff\\\\demo1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\React stuff\\\\demo1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';// import Recaptcha from 'react-recaptcha';\nimport'./RegisterForm.css';var Registerform=/*#__PURE__*/function(_React$Component){_inherits(Registerform,_React$Component);var _super=_createSuper(Registerform);function Registerform(props){var _this;_classCallCheck(this,Registerform);_this=_super.call(this,props);_this.callApi=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/api/hello');case 2:response=_context.sent;_context.next=5;return response.json();case 5:body=_context.sent;if(!(response.status!==200)){_context.next=8;break;}throw Error(body.message);case 8:return _context.abrupt(\"return\",body);case 9:case\"end\":return _context.stop();}}},_callee);}));_this.handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var response,body;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return fetch('/api/register',{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({email:_this.state.email})});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:body=_context2.sent;case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.state={email:''};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}// componentDidMount() {\n//     const script = document.getElementsByClassName(\"g-recaptcha\")\n//     script.src = \"https://www.google.com/recaptcha/api.js\";\n//     script.async = true;\n//     document.body.appendChild(script);\n// }\n_createClass(Registerform,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.callApi().then(function(res){return _this2.setState({response:res.express});}).catch(function(err){return console.log(err);});}},{key:\"handleChange\",// handle the state changed \nvalue:function handleChange(event){this.setState(_defineProperty({},event.target.id,event.target.value));}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"form-div\"},/*#__PURE__*/React.createElement(\"form\",{method:\"post\",action:\"/register\",onSubmit:this.handleSubmit},\"Email : \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"email\",onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"g-recaptcha\",\"data-sitekey\":\"6LeM5rwZAAAAAN_oBVB8O5T2TpEArvf-nR-1PSpSy\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",id:\"btn\",value:\"Register\"})));}}]);return Registerform;}(React.Component);export default Registerform;","map":{"version":3,"sources":["E:/React stuff/demo1/src/Registerform.js"],"names":["React","Registerform","props","callApi","fetch","response","json","body","status","Error","message","handleSubmit","e","preventDefault","method","headers","JSON","stringify","email","state","bind","handleChange","then","res","setState","express","catch","err","console","log","event","target","id","value","Component"],"mappings":"+oCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA;AACA,MAAO,oBAAP,C,GAGMC,CAAAA,Y,wHAIF,sBAAYC,KAAZ,CAAmB,8CACf,uBAAMA,KAAN,EADe,MA2BnBC,OA3BmB,sEA2BT,2KACiBC,CAAAA,KAAK,CAAC,YAAD,CADtB,QACAC,QADA,qCAEaA,CAAAA,QAAQ,CAACC,IAAT,EAFb,QAEAC,IAFA,oBAGHF,QAAQ,CAACG,MAAT,GAAoB,GAHjB,+BAG4BC,CAAAA,KAAK,CAACF,IAAI,CAACG,OAAN,CAHjC,wCAKCH,IALD,wDA3BS,SAmCnBI,YAnCmB,2FAmCJ,kBAAMC,CAAN,wIACXA,CAAC,CAACC,cAAF,GADW,uBAGYT,CAAAA,KAAK,CAAE,eAAF,CAAoB,CAC5CU,MAAM,CAAE,MADoC,CAE5CC,OAAO,CAAE,CACL,eAAe,kBADV,CAFmC,CAK5CR,IAAI,CAAES,IAAI,CAACC,SAAL,CAAe,CAACC,KAAK,CAAE,MAAKC,KAAL,CAAWD,KAAnB,CAAf,CALsC,CAApB,CAHjB,QAGLb,QAHK,uCAWQA,CAAAA,QAAQ,CAACC,IAAT,EAXR,QAWLC,IAXK,wEAnCI,gEAGf,MAAKY,KAAL,CAAa,CACTD,KAAK,CAAE,EADE,CAAb,CAMA,MAAKP,YAAL,CAAoB,MAAKA,YAAL,CAAkBS,IAAlB,+BAApB,CACA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBD,IAAlB,+BAApB,CAVe,aAYlB,CACD;AACA;AAEA;AACA;AAEA;AACA;sFAEoB,iBAChB,KAAKjB,OAAL,GACKmB,IADL,CACU,SAAAC,GAAG,QAAI,CAAA,MAAI,CAACC,QAAL,CAAc,CAAEnB,QAAQ,CAAEkB,GAAG,CAACE,OAAhB,CAAd,CAAJ,EADb,EAEKC,KAFL,CAEW,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAFd,EAGH,C,sBAwBD;4BACaG,K,CAAO,CAChB,KAAKN,QAAL,oBACKM,KAAK,CAACC,MAAN,CAAaC,EADlB,CACuBF,KAAK,CAACC,MAAN,CAAaE,KADpC,GAKH,C,uCAIQ,CACL,mBACI,2BAAK,SAAS,CAAC,UAAf,eACI,4BAAM,MAAM,CAAC,MAAb,CAAoB,MAAM,CAAC,WAA3B,CAAuC,QAAQ,CAAE,KAAKtB,YAAtD,0BACY,8BADZ,cAEI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,OAAtB,CAA8B,QAAQ,CAAE,KAAKU,YAA7C,EAFJ,cAII,2BACI,SAAS,CAAC,aADd,CAEI,eAAa,2CAFjB,EAJJ,cAQI,8BARJ,cASI,6BAAO,IAAI,CAAC,QAAZ,CAAqB,EAAE,CAAC,KAAxB,CAA8B,KAAK,CAAC,UAApC,EATJ,CADJ,CADJ,CAeH,C,0BAjFsBrB,KAAK,CAACkC,S,EAsFjC,cAAejC,CAAAA,YAAf","sourcesContent":["import React from 'react';\r\n// import Recaptcha from 'react-recaptcha';\r\nimport './RegisterForm.css';\r\n\r\n\r\nclass Registerform extends React.Component {\r\n\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            email: '',\r\n        };\r\n\r\n\r\n\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n\r\n    }\r\n    // componentDidMount() {\r\n    //     const script = document.getElementsByClassName(\"g-recaptcha\")\r\n\r\n    //     script.src = \"https://www.google.com/recaptcha/api.js\";\r\n    //     script.async = true;\r\n\r\n    //     document.body.appendChild(script);\r\n    // }\r\n\r\n    componentDidMount() {\r\n        this.callApi()\r\n            .then(res => this.setState({ response: res.express }))\r\n            .catch(err => console.log(err));\r\n    }\r\n    callApi = async () =>{\r\n        const response = await fetch('/api/hello');\r\n        const body = await response.json();\r\n        if(response.status !== 200) throw Error(body.message);\r\n\r\n        return body;\r\n    }\r\n\r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n       \r\n        const response = await fetch ('/api/register',  {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-Type':'application/json',\r\n            },\r\n            body: JSON.stringify({email: this.state.email}),\r\n        });\r\n\r\n        const body = await response.json();\r\n      \r\n\r\n    }\r\n    // handle the state changed \r\n    handleChange(event) {\r\n        this.setState({\r\n            [event.target.id]: event.target.value\r\n            // grab the state property\r\n        })\r\n\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"form-div\">\r\n                <form method=\"post\" action=\"/register\" onSubmit={this.handleSubmit}>\r\n                    Email : <br />\r\n                    <input type=\"text\" id=\"email\" onChange={this.handleChange} />\r\n\r\n                    <div\r\n                        className=\"g-recaptcha\"\r\n                        data-sitekey=\"6LeM5rwZAAAAAN_oBVB8O5T2TpEArvf-nR-1PSpSy\">\r\n                    </div>\r\n                    <br />\r\n                    <input type=\"submit\" id=\"btn\" value=\"Register\" />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default Registerform;"]},"metadata":{},"sourceType":"module"}